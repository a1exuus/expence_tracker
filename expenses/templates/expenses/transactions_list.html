{% extends 'base.html' %}
{% load humanize %}

{% block title %}–í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏{% endblock %}

{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>–í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</h2>
    <div class="d-flex gap-2">
        <a href="{% url 'income_add' %}" class="btn btn-success">‚ûï –î–æ–±–∞–≤–∏—Ç—å –¥–æ—Ö–æ–¥</a>
        <a href="{% url 'expense_add' %}" class="btn btn-danger">‚ûñ –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</a>
    </div>
</div>

<table class="table table-striped table-bordered shadow-sm bg-white">
    <thead class="table-dark">
        <tr>
            <th>–î–∞—Ç–∞</th>
            <th>–¢–∏–ø</th>
            <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
            <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
            <th class="text-end">–°—É–º–º–∞</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        {% for t in transactions %}
        <tr class="{% if t.type == '–î–æ—Ö–æ–¥' %}table-success{% else %}table-danger{% endif %}">
            <td>{{ t.type }}</td>
            <td>{{ t.date|date:"d.m.Y" }}</td>
            <td>{{ t.category.name }}</td>
            <td>{{ t.description }}</td>
            <td class="text-end">
                {% if t.type == '–î–æ—Ö–æ–¥' %}
                    +{{ t.amount|floatformat:2|intcomma }} BYN
                {% else %}
                    -{{ t.amount|floatformat:2|intcomma }} BYN
                {% endif %}
            </td>
            <td class="text-center">
                {% if t.type == '–î–æ—Ö–æ–¥' %}
                    <a href="{% url 'income_edit' t.id %}" class="btn btn-sm btn-warning">‚úèÔ∏è</a>
                    <a href="{% url 'income_delete' t.id %}" class="btn btn-sm btn-danger">üóë</a>
                {% else %}
                    <a href="{% url 'expense_edit' t.id %}" class="btn btn-sm btn-warning">‚úèÔ∏è</a>
                    <a href="{% url 'expense_delete' t.id %}" class="btn btn-sm btn-danger">üóë</a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
